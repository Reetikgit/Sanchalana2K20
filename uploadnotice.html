<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>UploadNotice</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- MATERIAL DESIGN ICONIC FONT -->
		<link rel="stylesheet" href="fontsP/material-design-iconic-font/css/material-design-iconic-font.min.css">
		
		<!-- STYLE CSS -->
		<link rel="stylesheet" href="cssP/style.css">
	</head>

	<body>

		<div class="wrapper" style="background-image: url('images/panel.jpg');">
			<div class="inner">
				<form action="" method="POST" id="registrationform">
					<h3 style="color: white">Sanchalana Board Panel</h3>
					<div class="form-group">
						<div class="form-wrapper">
							<label for="" style="color: white">T/S Coordinator name</label>
							<input type="text" id="name" class="form-control" required="Please enter your name" style="color: white">
						</div>
						<div class="form-wrapper">
							<label for="" style="color: white">Notice related to event?</label>
							<input type="text"  id="event" class="form-control" required="Please enter your usn" style="color: white">
						</div>
					</div>
					<div class="form-wrapper">
						<label for="" style="color: white">Your Notice</label>
						<textarea id="notice" class="form-control" required="required" style="color: white;height: 11em;">
        
            </textarea> 
					</div>
				
					<button sendMessage()>Register Now</button>
				</form>
			</div>
		</div>
		
	</body>
	  <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase.js"></script>
  <script type="text/javascript">

  
 
  var firebaseConfig = {
    apiKey: "AIzaSyB_5vqcnQ7sD2AsHeBRl2QB6GifZmp8jGM",
    authDomain: "contactform-673b7.firebaseapp.com",
    databaseURL: "https://contactform-673b7.firebaseio.com",
    projectId: "contactform-673b7",
    storageBucket: "",
    messagingSenderId: "172917494368",
    appId: "1:172917494368:web:1cc301177c4f4fd6a46905",
    measurementId: "G-N5BDJDDC63"

  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  
//Reference for form collection(3)
// let formMessage = firebase.database().ref('register');
let formMessage = firebase.database().ref('noticeboard');

document
  .getElementById('registrationform')
  .addEventListener('submit', formSubmit);
  
  database=firebase.database();
  var ref=database.ref('noticeboard');

 // var keys;
  ref.on('value',gotData,errData);

   var initials;
   var count;
   var match=0,usnD,sc,sc2;
   var keys,keys2;
   var len=0;
  function gotData(data)
  {

     sc=data.val();
    
     keys=Object.keys(sc);
     l=keys.length;
    
     
   }

    function errData(err)
  {
    console.log('error');
    console.log(err);
  }

function formSubmit(e) {
  e.preventDefault();
  // Get Values from the DOM
  let name = document.querySelector('#name').value;
  var notice = document.querySelector('#notice').value;
  let event = document.querySelector('#event').value;

  //send message values
  // sendMessage(name, usn, email,event, phn, branch, sem, random);

  
  /*Fetching the elements from each object*/

// for(var i=0;i<keys.length;i++)
//   {
//       match=0;
//       var k=keys[i];
//       initials=sc[k].name;
//       var emails=sc[k].email;
//       usnD=sc[k].usn;


//    }

            sendMessage(name,event,notice);
            alert("Notice uploaded successfully on the board");
            document.getElementById('registrationform').reset();
  			     // window.location = "index.html#portfolio"         

}

//Send Message to Firebase(4)

function sendMessage(name,event,notice) {
  let newFormMessage = formMessage.push();

  newFormMessage.set({
    name: name,
    event:event,
    notice:notice

  });
 

}
</script>
<script src="https://cdn.firebase.com/libs/firebaseui/2.3.0/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.3.0/firebaseui.css" />
</html>